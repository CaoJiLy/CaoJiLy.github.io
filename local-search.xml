<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>快速上手flask</title>
    <link href="/2023/02/02/flask-study/"/>
    <url>/2023/02/02/flask-study/</url>
    
    <content type="html"><![CDATA[<h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><ol><li>进入项目根目录，构建虚拟环境，生成名称为venv的环境，可以看到生成了venv文件夹<br>  <code>python3 -m venv venv</code></li><li>激活虚拟环境(使用 <code>deactivate</code>退出虚拟环境)<br> <code>. venv/bin/activate</code></li><li>安装flask, 遇到安装不了的情况可以尝试更换安装源<br> <code> pipe install flask</code><br> 更换安装源<br> <code>pip install flask -i http://pypi.douban.com/simple/ --trusted-host pypi.douban.com</code></li></ol><h2 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h2><h3 id="1-依赖管理"><a href="#1-依赖管理" class="headerlink" title="1. 依赖管理"></a>1. 依赖管理</h3><p>requirement.txt<br>    * 安装文件中的依赖 <code>pip install -r requirements.txt</code><br>    * 环境中的依赖写入文件 <code>pip freeze &gt;requirements.txt</code></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">Flask</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-number">2.2</span>.<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h3 id="2-配置文件"><a href="#2-配置文件" class="headerlink" title="2. 配置文件"></a>2. 配置文件</h3><p>config.py</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs ruby">import os<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Config</span>:<br>    <span class="hljs-variable constant_">SECRET_KEY</span> = os.environ.get(<span class="hljs-string">&#x27;SECRET_KEY&#x27;</span>) <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;hard to guess string&#x27;</span><br><br>    <span class="hljs-variable">@staticmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">init_app</span>(<span class="hljs-params">app</span>):<br>        pass<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DevelopmentConfig</span>(<span class="hljs-title class_">Config</span>):<br>    <span class="hljs-variable constant_">DEBUG</span> = <span class="hljs-title class_">True</span><br>    <span class="hljs-variable constant_">DB_URL</span> = <span class="hljs-string">&#x27;&#x27;</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductConfig</span>(<span class="hljs-title class_">Config</span>):<br>    <span class="hljs-variable constant_">DB_URL</span> = <span class="hljs-string">&#x27;&#x27;</span><br><br><br>config = &#123;<br>    <span class="hljs-string">&#x27;development&#x27;</span>: <span class="hljs-title class_">DevelopmentConfig</span>,<br>    <span class="hljs-string">&#x27;production&#x27;</span>: <span class="hljs-title class_">ProductConfig</span>,<br>    <span class="hljs-string">&#x27;default&#x27;</span>: <span class="hljs-title class_">DevelopmentConfig</span><br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="3-使用蓝图创建路由"><a href="#3-使用蓝图创建路由" class="headerlink" title="3. 使用蓝图创建路由"></a>3. 使用蓝图创建路由</h3><p>router.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Blueprint<br><br>user = Blueprint(<span class="hljs-string">&#x27;user&#x27;</span>, __name__)<br><br><br><span class="hljs-meta">@user.app_errorhandler(<span class="hljs-params"><span class="hljs-number">404</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">page_not_found</span>(<span class="hljs-params">e</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;404&#x27;</span>, <span class="hljs-number">404</span><br><br><br><span class="hljs-meta">@user.route(<span class="hljs-params"><span class="hljs-string">&#x27;/user/&lt;name&gt;&#x27;</span>, methods=[<span class="hljs-string">&#x27;get&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_name</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;name = &#123;name&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(name=name)<br></code></pre></td></tr></table></figure><h3 id="4-入口文件"><a href="#4-入口文件" class="headerlink" title="4. 入口文件"></a>4. 入口文件</h3><p>flaskdemo.py</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">from flask import Flask<br>from config import config<br>from .userrouter import user<br>import os<br><br><br>def create<span class="hljs-constructor">_app(<span class="hljs-params">config_name</span>)</span>:<br>    app = <span class="hljs-constructor">Flask(<span class="hljs-params">__name__</span>)</span><br>    app.config.from<span class="hljs-constructor">_object(<span class="hljs-params">config</span>[<span class="hljs-params">config_name</span>])</span><br>    config<span class="hljs-literal">[<span class="hljs-identifier">config_name</span>]</span>.init<span class="hljs-constructor">_app(<span class="hljs-params">app</span>)</span><br>    app.register<span class="hljs-constructor">_blueprint(<span class="hljs-params">user</span>)</span><br>    return app<br><br>app = create<span class="hljs-constructor">_app(<span class="hljs-params">os</span>.<span class="hljs-params">getenv</span>(&#x27;FLASK_CONFIG&#x27;)</span> <span class="hljs-keyword">or</span> &#x27;default&#x27;)<br></code></pre></td></tr></table></figure><h3 id="5-运行应用"><a href="#5-运行应用" class="headerlink" title="5. 运行应用"></a>5. 运行应用</h3><p>启动服务，’0.0.0.0’ 使服务被外网访问到</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ <span class="hljs-built_in">export</span> <span class="hljs-attribute">FLASK_APP</span>=flaskdemo.py<br>$ <span class="hljs-built_in">export</span> <span class="hljs-attribute">FLASK_DEBUG</span>=1<br>$ flask <span class="hljs-built_in">run</span> -h <span class="hljs-string">&#x27;0.0.0.0&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="Docker部署"><a href="#Docker部署" class="headerlink" title="Docker部署"></a>Docker部署</h2><p>Flask自带的Web开发服务器不够稳健、安全和高效，不适合在生产环境中使用</p>]]></content>
    
    
    
    <tags>
      
      <tag>flask</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>github博客搭建</title>
    <link href="/2023/02/01/blogcreate/"/>
    <url>/2023/02/01/blogcreate/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
    <tags>
      
      <tag>博客</tag>
      
      <tag>blog</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2023/02/01/hello-world/"/>
    <url>/2023/02/01/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
